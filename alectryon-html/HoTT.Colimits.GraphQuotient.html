<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>GraphQuotient.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.19.0+0.19.3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document">


<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk0"><span class="kn">Require Import</span> Basics.Overture Basics.Tactics Basics.PathGroupoids Basics.Equivalences.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">[Loading ML file number_string_notation_plugin.cmxs (<span class="nb">using</span> legacy method) ... <span class="bp">done</span>]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Types.<span class="kn">Universe</span> <span class="nf">Types</span>.Paths Types.Arrow Types.Sigma Cubical.DPath.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** * Quotient of a graph *)</span>

<span class="sd">(** ** Definition *)</span>

<span class="sd">(** The quotient of a graph is one of the simplest HITs that can be found in HoTT. It consists of a base type and a relation on it, and for every witness of a relation between two points of the type, a path.</span>

<span class="sd">We use graph quotients to build up all our other non-recursive HITs. Their simplicity means that we can easily prove results about them and generalise them to other HITs. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Local Unset Elimination Schemes</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Module</span> <span class="nf">Export</span> GraphQuotient.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"> </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1"><span class="kn">Section</span> <span class="nf">GraphQuotient</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">Trying to mask the absolute name <span class="s2">&quot;GraphQuotient.GraphQuotient&quot;</span>!
[masking-absolute-name,deprecated-since-<span class="mi">8</span>.<span class="mi">8</span>,deprecated,default]</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">Universes i j u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Constraint</span> <span class="nf">i</span> &lt;= u, j &lt;= u.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">A</span> : <span class="kt">Type</span>@{i}}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">Private <span class="kn">Inductive</span> <span class="nf">GraphQuotient</span> (<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>@{j}) : <span class="kt">Type</span>@{u} :=
  | gq : A -&gt; GraphQuotient R.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> gq {R} a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> {<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>@{j}}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Axiom</span> <span class="nv">gqglue</span> : <span class="kr">forall</span> {<span class="nv">a</span> <span class="nv">b</span> : A},
    R a b -&gt; paths (@gq R a) (gq b).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">GraphQuotient_ind</span>
    (<span class="nv">P</span> : GraphQuotient R -&gt; <span class="kt">Type</span>@{k})
    (<span class="nv">gq&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span>, P (gq a))
    (<span class="nv">gqglue&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> (<span class="nv">s</span> : R a b), gqglue s # gq&#39; a = gq&#39; b)
    : <span class="kr">forall</span> <span class="nv">x</span>, P x := <span class="kr">fun</span> <span class="nv">x</span> =&gt;
    <span class="kr">match</span> x <span class="kr">with</span>
    | gq a =&gt; <span class="kr">fun</span> <span class="nv">_</span> =&gt; gq&#39; a
    <span class="kr">end</span> gqglue&#39;.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** Above we did a match with output type a function, and then outside of the match we provided the argument [gqglue&#39;].  If we instead end with [| gq a =&gt; gq&#39; a end.], the definition will not depend on [gqglue&#39;], which would be incorrect.  This is the idiom referred to in ../../test/bugs/github1758.v and github1759.v. *)</span>

</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Axiom</span> <span class="nv">GraphQuotient_ind_beta_gqglue</span>
  : <span class="kr">forall</span> (<span class="nv">P</span> : GraphQuotient R -&gt; <span class="kt">Type</span>@{k})
    (<span class="nv">gq&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span>, P (gq a))
    (<span class="nv">gqglue&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> (<span class="nv">s</span> : R a b), gqglue s # gq&#39; a = gq&#39; b)
    (<span class="nv">a</span> <span class="nv">b</span>: A) (<span class="nv">s</span> : R a b),
    apD (GraphQuotient_ind P gq&#39; gqglue&#39;) (gqglue s) = gqglue&#39; a b s.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp"> </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">GraphQuotient</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">GraphQuotient</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> gq {A R} a.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2"><span class="kn">Definition</span> <span class="nf">GraphQuotient_rec</span> {<span class="nv">A</span> <span class="nv">R</span> <span class="nv">P</span>} (<span class="nv">c</span> : A -&gt; P) (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; c a = c b)
  : GraphQuotient R -&gt; P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient R -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient R -&gt; P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk4">srapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A, (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk5"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) (gqglue s)
  (<span class="nl">?gq&#39;</span> a) = <span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6"><span class="mi">1</span>: <span class="bp">exact</span> c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) (gqglue s)
  (c a) = c b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) (gqglue s)
  (c a) = c b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">refine</span> (transport_const _ _ @ g a b s).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8"><span class="kn">Definition</span> <span class="nf">GraphQuotient_rec_beta_gqglue</span> {<span class="nv">A</span> <span class="nv">R</span> <span class="nv">P</span>}
  (<span class="nv">c</span> : A -&gt; P) (<span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; c a = c b)
  (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b)
  : ap (GraphQuotient_rec c g) (gqglue s) = g a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (GraphQuotient_rec c g) (gqglue s) = g a b s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (GraphQuotient_rec c g) (gqglue s) = g a b s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka"><span class="nb">unfold</span> GraphQuotient_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (GraphQuotient_ind (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) c
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
      transport_const (gqglue s) (c a) @ g a b s))
  (gqglue s) = g a b s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb"><span class="nb">refine</span> (cancelL _ _ _ _ ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="nl">?Goal0</span> @
ap
  (GraphQuotient_ind (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) c
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
      transport_const (gqglue s) (c a) @ g a b s))
  (gqglue s) = <span class="nl">?Goal0</span> @ g a b s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc"><span class="nb">refine</span> ((apD_const _ _)^ @ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>A -&gt; P</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; c a = c b</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">apD
  (GraphQuotient_ind (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) c
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
      transport_const (gqglue s) (c a) @ g a b s))
  (gqglue s) =
transport_const (gqglue s)
  (GraphQuotient_ind (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; P) c
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
      transport_const (gqglue s) (c a) @ g a b s)
     (gq a)) @ g a b s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">rapply GraphQuotient_ind_beta_gqglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** The flattening lemma *)</span>

<span class="sd">(** Univalence tells us that type families over a colimit correspond to cartesian families over the indexing diagram.  The flattening lemma gives an explicit description of the family over a colimit that corresponds to a given cartesian family, again using univalence.  Together, these are known as descent, a fundamental result in higher topos theory which has many implications. *)</span>

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Flattening</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> `{Univalence} {A : <span class="kt">Type</span>} {R : A -&gt; A -&gt; <span class="kt">Type</span>}.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  <span class="sd">(** We consider a type family over [A] which is &quot;equifibrant&quot; or &quot;cartesian&quot;: the fibers are equivalent when the base points are related by [R]. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Context</span> (<span class="nv">F</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">e</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>, R x y -&gt; F x &lt;~&gt; F y).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** By univalence, the equivalences give equalities, which means that [F] induces a map on the quotient. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">DGraphQuotient</span> : GraphQuotient R -&gt; <span class="kt">Type</span>
    := GraphQuotient_rec F (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">s</span> =&gt; path_universe (e x y s)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The transport of [DGraphQuotient] along [gqglue] equals the equivalence [e] applied to the original point. This lemma is required a few times in the following proofs. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd"><span class="kn">Definition</span> <span class="nf">transport_DGraphQuotient</span> {<span class="nv">x</span> <span class="nv">y</span>} (<span class="nv">s</span> : R x y) (<span class="nv">a</span> : F x)
    : transport DGraphQuotient (gqglue s) a = e x y s a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport DGraphQuotient (gqglue s) a = e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chke"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport DGraphQuotient (gqglue s) a = e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkf">lhs nrapply transport_idmap_ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport idmap (ap DGraphQuotient (gqglue s)) a =
e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk10">lhs nrapply (transport2 idmap).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap DGraphQuotient (gqglue s) = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk11" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk11"><hr></label><div class="goal-conclusion">transport idmap <span class="nl">?Goal</span> a = e x y s a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk12"><span class="mi">1</span>: <span class="nb">apply</span> GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport idmap (path_universe (e x y s)) a =
e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">rapply transport_path_universe.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The family [DGraphQuotient] we have defined over [GraphQuotient R] has a total space which we will describe as a [GraphQuotient] of [sig F] by an appropriate relation. *)</span>

  <span class="sd">(** We mimic the constructors of [GraphQuotient] for the total space. Here is the point constructor. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk13"><span class="kn">Definition</span> <span class="nf">flatten_gq</span> {<span class="nv">x</span>} : F x -&gt; sig DGraphQuotient.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">F x -&gt; {x : _ &amp; DGraphQuotient x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk14"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">F x -&gt; {x : _ &amp; DGraphQuotient x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk15"><span class="nb">intros</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (gq x; p).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** And here is the path constructor. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk16"><span class="kn">Definition</span> <span class="nf">flatten_gqglue</span> {<span class="nv">x</span> <span class="nv">y</span>} (<span class="nv">s</span> : R x y) (<span class="nv">a</span> : F x)
    : flatten_gq a = flatten_gq (e x y s a).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">flatten_gq a = flatten_gq (e x y s a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk17"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">flatten_gq a = flatten_gq (e x y s a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk18">snrapply path_sigma&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gq x = gq y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk19"><hr></label><div class="goal-conclusion">transport DGraphQuotient <span class="nl">?p</span> a = e x y s a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gq x = gq y</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">apply</span> gqglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport DGraphQuotient (gqglue s) a = e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> transport_DGraphQuotient.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** This lemma is the same as [transport_DGraphQuotient] but adapted instead for [DPath]. The use of [DPath] will be apparent there. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1c"><span class="kn">Lemma</span> <span class="nf">equiv_dp_dgraphquotient</span> (<span class="nv">x</span> <span class="nv">y</span> : A) (<span class="nv">s</span> : R x y) (<span class="nv">a</span> : F x) (<span class="nv">b</span> : F y)
    : DPath DGraphQuotient (gqglue s) a b &lt;~&gt; (e x y s a = b).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath DGraphQuotient (gqglue s) a b &lt;~&gt; e x y s a = b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath DGraphQuotient (gqglue s) a b &lt;~&gt; e x y s a = b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1e"><span class="nb">refine</span> (equiv_concat_l _^ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>x, y</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R x y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>F x</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport DGraphQuotient (gqglue s) a = e x y s a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> transport_DGraphQuotient.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** We can also prove an induction principle for [sig DGraphQuotient]. We won&#39;t show that it satisfies the relevant computation rules as these will not be needed. Instead we will prove the non-dependent eliminator directly so that we can better reason about it. In order to get through the path algebra here, we have opted to use dependent paths. This makes the reasoning slightly easier, but it should not matter too much. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk1f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk1f"><span class="kn">Definition</span> <span class="nf">flatten_ind</span> {<span class="nv">Q</span> : sig DGraphQuotient -&gt; <span class="kt">Type</span>}
    (<span class="nv">Qgq</span> : <span class="kr">forall</span> <span class="nv">a</span> (<span class="nv">x</span> : F a), Q (flatten_gq x))
    (<span class="nv">Qgqglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a),
      flatten_gqglue s x # Qgq _ x = Qgq _ (e _ _ _ x))
    : <span class="kr">forall</span> <span class="nv">x</span>, Q x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : {x : _ &amp; DGraphQuotient x}, Q x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk20" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk20"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> : {x : _ &amp; DGraphQuotient x}, Q x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk21"><span class="nb">apply</span> sig_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">proj1</span> : GraphQuotient R)
(<span class="nv">proj2</span> : DGraphQuotient proj1), Q (proj1; proj2)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk22">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
 <span class="kr">forall</span> <span class="nv">proj2</span> : DGraphQuotient x, Q (x; proj2)) (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk23" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk23"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   <span class="kr">forall</span> <span class="nv">proj2</span> : DGraphQuotient x, Q (x; proj2))
  (gqglue s) (<span class="nl">?gq&#39;</span> a) = 
<span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk24"><span class="mi">1</span>: <span class="bp">exact</span> Qgq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   <span class="kr">forall</span> <span class="nv">proj2</span> : DGraphQuotient x, Q (x; proj2))
  (gqglue s) (Qgq a) = Qgq b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk25"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   <span class="kr">forall</span> <span class="nv">proj2</span> : DGraphQuotient x, Q (x; proj2))
  (gqglue s) (Qgq a) = Qgq b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk26"><span class="nb">apply</span> dp_forall.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">x</span> : DGraphQuotient (gq a))
(<span class="nv">y</span> : DGraphQuotient (gq b))
(<span class="nv">q</span> : DPath DGraphQuotient (gqglue s) x y),
DPath Q (path_sigma_dp (gqglue s; q)) (Qgq a x)
  (Qgq b y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk27"><span class="nb">intros</span> x y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">q</span> : DPath DGraphQuotient (gqglue s) x y,
DPath Q (path_sigma_dp (gqglue s; q)) (Qgq a x)
  (Qgq b y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk28">srapply (equiv_ind (equiv_dp_dgraphquotient a b s x y)^-<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x0</span> : e a b s x = y,
(<span class="kr">fun</span> <span class="nv">y0</span> : DPath DGraphQuotient (gqglue s) x y =&gt;
 DPath Q (path_sigma_dp (gqglue s; y0)) (Qgq a x)
   (Qgq b y))
  ((<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span>
     x0)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk29"><span class="nb">intros</span> q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq b)</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span>e a b s x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">y0</span> : DPath DGraphQuotient (gqglue s) x y =&gt;
 DPath Q (path_sigma_dp (gqglue s; y0)) (Qgq a x)
   (Qgq b y))
  ((<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> q)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2a"><span class="nb">destruct</span> q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">DPath Q
  (path_sigma_dp
     (gqglue s;
     (<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span>
       <span class="mi">1</span>)) (Qgq a x) (Qgq b (e a b s x))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2b"><span class="nb">refine</span> (transport2 _ _ _ @ Qgqglue a b s x).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">path_sigma_dp
  (gqglue s;
  (<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> <span class="mi">1</span>) =
flatten_gqglue s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2c"><span class="nb">refine</span> (ap (path_sigma_uncurried DGraphQuotient _ _) _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(gqglue s;
(<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> <span class="mi">1</span>) =
(gqglue s; transport_DGraphQuotient s x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2d">snrapply path_sigma.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(gqglue s;
(<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> <span class="mi">1</span>).<span class="mi">1</span> =
(gqglue s; transport_DGraphQuotient s x).<span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk2e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk2e"><hr></label><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">p</span> : (flatten_gq x).<span class="mi">1</span> = (flatten_gq (e a b s x)).<span class="mi">1</span>
   =&gt;
   transport DGraphQuotient p (flatten_gq x).<span class="mi">2</span> =
   (flatten_gq (e a b s x)).<span class="mi">2</span>) 
  <span class="nl">?p</span>
  (gqglue s;
  (<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> <span class="mi">1</span>).<span class="mi">2</span> =
(gqglue s; transport_DGraphQuotient s x).<span class="mi">2</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk2f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk2f"><span class="mi">1</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">p</span> : (flatten_gq x).<span class="mi">1</span> = (flatten_gq (e a b s x)).<span class="mi">1</span>
   =&gt;
   transport DGraphQuotient p (flatten_gq x).<span class="mi">2</span> =
   (flatten_gq (e a b s x)).<span class="mi">2</span>) <span class="mi">1</span>
  (gqglue s;
  (<span class="nb">transitivity</span> (transport_DGraphQuotient s x)^)^-<span class="mi">1</span> <span class="mi">1</span>).<span class="mi">2</span> =
(gqglue s; transport_DGraphQuotient s x).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk30">lhs nrapply concat_p1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>{x : _ &amp; DGraphQuotient x} -&gt; <span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a), Q (flatten_gq x)</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a),
transport Q (flatten_gqglue s x) (Qgq a x) =
Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((transport_DGraphQuotient s x)^)^ =
(gqglue s; transport_DGraphQuotient s x).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> inv_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Rather than use [flatten_ind] to define [flatten_rec] we reprove this simple case. This means we can later reason about it and derive the computation rules easily. The full computation rule for [flatten_ind] takes some work to derive and is not actually needed. *)</span>
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk31"><span class="kn">Definition</span> <span class="nf">flatten_rec</span> {<span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">Qgq</span> : <span class="kr">forall</span> <span class="nv">a</span>, F a -&gt; Q)
    (<span class="nv">Qgqglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a), Qgq a x = Qgq b (e _ _ s x))
    : sig DGraphQuotient -&gt; Q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk32"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk33"><span class="nb">apply</span> sig_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">proj1</span> : GraphQuotient R,
DGraphQuotient proj1 -&gt; Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk34">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt; DGraphQuotient x -&gt; Q)
  (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk35"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt; DGraphQuotient x -&gt; Q)
  (gqglue s) (<span class="nl">?gq&#39;</span> a) = 
<span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk36" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk36"><span class="mi">1</span>: <span class="bp">exact</span> Qgq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt; DGraphQuotient x -&gt; Q)
  (gqglue s) (Qgq a) = Qgq b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk37" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk37"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt; DGraphQuotient x -&gt; Q)
  (gqglue s) (Qgq a) = Qgq b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk38" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk38">nrapply dpath_arrow.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y1</span> : DGraphQuotient (gq a),
transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
  (Qgq a y1) =
Qgq b (transport DGraphQuotient (gqglue s) y1)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk39" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk39"><span class="nb">intros</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
  (Qgq a y) =
Qgq b (transport DGraphQuotient (gqglue s) y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3a">lhs nrapply transport_const.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Qgq a y =
Qgq b (transport DGraphQuotient (gqglue s) y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3b">lhs nrapply (Qgqglue a b s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Qgq b (e a b s y) =
Qgq b (transport DGraphQuotient (gqglue s) y)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3c">f_ap; <span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b s x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>DGraphQuotient (gq a)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport DGraphQuotient (gqglue s) y = e a b s y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> transport_DGraphQuotient.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** The non-dependent eliminator computes as expected on our &quot;path constructor&quot;. *)</span> 
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3d"><span class="kn">Definition</span> <span class="nf">flatten_rec_beta_gqglue</span> {<span class="nv">Q</span> : <span class="kt">Type</span>} (<span class="nv">Qgq</span> : <span class="kr">forall</span> <span class="nv">a</span>, F a -&gt; Q)
    (<span class="nv">Qgqglue</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a), Qgq a x = Qgq b (e _ _ r x))
    (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a)
    : ap (flatten_rec Qgq Qgqglue) (flatten_gqglue s x) = Qgqglue a b s x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (flatten_rec Qgq Qgqglue) (flatten_gqglue s x) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (flatten_rec Qgq Qgqglue) (flatten_gqglue s x) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk3f">lhs nrapply ap_sig_rec_path_sigma; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((((transport_const (gqglue s) (Qgq a x))^ @
   (ap
      (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
       transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
         (gqglue s) (Qgq a x))
      (transport_Vp DGraphQuotient (gqglue s) x))^) @
  (transport_arrow (gqglue s) (Qgq a)
     (transport DGraphQuotient (gqglue s) x))^) @
 ap10
   (apD
      (GraphQuotient_ind
         (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
          DGraphQuotient x -&gt; Q) Qgq
         (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
          dpath_arrow DGraphQuotient
            (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
            (Qgq a) (Qgq b)
            (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
             transport_const (gqglue s) (Qgq a y) @
             (Qgqglue a b s y @
              <span class="kr">match</span>
                (transport_DGraphQuotient s y)^ <span class="kr">in</span>
                (_ = a0)
                <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
              <span class="kr">with</span>
              | <span class="mi">1</span> =&gt; <span class="mi">1</span>
              <span class="kr">end</span>)))) (gqglue s))
   (transport DGraphQuotient (gqglue s) x)) @
ap (Qgq b) (transport_DGraphQuotient s x) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk40">lhs nrapply (ap (<span class="kr">fun</span> <span class="nv">x</span> =&gt; x @ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((transport_const (gqglue s) (Qgq a x))^ @
  (ap
     (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
      transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
        (gqglue s) (Qgq a x))
     (transport_Vp DGraphQuotient (gqglue s) x))^) @
 (transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^) @
ap10
  (apD
     (GraphQuotient_ind
        (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
         DGraphQuotient x -&gt; Q) Qgq
        (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
         dpath_arrow DGraphQuotient
           (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
           (Qgq a) (Qgq b)
           (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
            transport_const (gqglue s) (Qgq a y) @
            (Qgqglue a b s y @
             <span class="kr">match</span>
               (transport_DGraphQuotient s y)^ <span class="kr">in</span>
               (_ = a0)
               <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
             <span class="kr">with</span>
             | <span class="mi">1</span> =&gt; <span class="mi">1</span>
             <span class="kr">end</span>)))) (gqglue s))
  (transport DGraphQuotient (gqglue s) x) = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk41" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk41"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> @ ap (Qgq b) (transport_DGraphQuotient s x) =
Qgqglue a b s x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk42">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((transport_const (gqglue s) (Qgq a x))^ @
  (ap
     (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
      transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
        (gqglue s) (Qgq a x))
     (transport_Vp DGraphQuotient (gqglue s) x))^) @
 (transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^) @
ap10
  (apD
     (GraphQuotient_ind
        (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
         DGraphQuotient x -&gt; Q) Qgq
        (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
         dpath_arrow DGraphQuotient
           (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
           (Qgq a) (Qgq b)
           (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
            transport_const (gqglue s) (Qgq a y) @
            (Qgqglue a b s y @
             <span class="kr">match</span>
               (transport_DGraphQuotient s y)^ <span class="kr">in</span>
               (_ = a0)
               <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
             <span class="kr">with</span>
             | <span class="mi">1</span> =&gt; <span class="mi">1</span>
             <span class="kr">end</span>)))) (gqglue s))
  (transport DGraphQuotient (gqglue s) x) = <span class="nl">?Goal</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk43">nrapply ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap10
  (apD
     (GraphQuotient_ind
        (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
         DGraphQuotient x -&gt; Q) Qgq
        (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
         dpath_arrow DGraphQuotient
           (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
           (Qgq a) (Qgq b)
           (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
            transport_const (gqglue s) (Qgq a y) @
            (Qgqglue a b s y @
             <span class="kr">match</span>
               (transport_DGraphQuotient s y)^ <span class="kr">in</span>
               (_ = a0)
               <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
             <span class="kr">with</span>
             | <span class="mi">1</span> =&gt; <span class="mi">1</span>
             <span class="kr">end</span>)))) (gqglue s))
  (transport DGraphQuotient (gqglue s) x) = <span class="nl">?Goal0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk44">nrapply (ap01 (<span class="kr">fun</span> <span class="nv">x</span> =&gt; ap10 x _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">apD
  (GraphQuotient_ind
     (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt; DGraphQuotient x -&gt; Q)
     Qgq
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) =&gt;
      dpath_arrow DGraphQuotient
        (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
        (Qgq a) (Qgq b)
        (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
         transport_const (gqglue s) (Qgq a y) @
         (Qgqglue a b s y @
          <span class="kr">match</span>
            (transport_DGraphQuotient s y)^ <span class="kr">in</span>
            (_ = a0)
            <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; <span class="mi">1</span>
          <span class="kr">end</span>)))) (gqglue s) = <span class="nl">?Goal0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply GraphQuotient_ind_beta_gqglue.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk45">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((((transport_const (gqglue s) (Qgq a x))^ @
   (ap
      (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
       transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
         (gqglue s) (Qgq a x))
      (transport_Vp DGraphQuotient (gqglue s) x))^) @
  (transport_arrow (gqglue s) (Qgq a)
     (transport DGraphQuotient (gqglue s) x))^) @
 ap10
   (dpath_arrow DGraphQuotient
      (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
      (Qgq a) (Qgq b)
      (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
       transport_const (gqglue s) (Qgq a y) @
       (Qgqglue a b s y @
        <span class="kr">match</span>
          (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
          <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
        <span class="kr">with</span>
        | <span class="mi">1</span> =&gt; <span class="mi">1</span>
        <span class="kr">end</span>))) (transport DGraphQuotient (gqglue s) x)) @
ap (Qgq b) (transport_DGraphQuotient s x) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk46"><span class="nb">apply</span> moveR_pM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(((transport_const (gqglue s) (Qgq a x))^ @
  (ap
     (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
      transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
        (gqglue s) (Qgq a x))
     (transport_Vp DGraphQuotient (gqglue s) x))^) @
 (transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^) @
ap10
  (dpath_arrow DGraphQuotient
     (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s) (Qgq a)
     (Qgq b)
     (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
      transport_const (gqglue s) (Qgq a y) @
      (Qgqglue a b s y @
       <span class="kr">match</span>
         (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
         <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
       <span class="kr">with</span>
       | <span class="mi">1</span> =&gt; <span class="mi">1</span>
       <span class="kr">end</span>))) (transport DGraphQuotient (gqglue s) x) =
Qgqglue a b s x @
(ap (Qgq b) (transport_DGraphQuotient s x))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk47"><span class="nb">apply</span> moveL_pM.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((((transport_const (gqglue s) (Qgq a x))^ @
   (ap
      (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
       transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
         (gqglue s) (Qgq a x))
      (transport_Vp DGraphQuotient (gqglue s) x))^) @
  (transport_arrow (gqglue s) (Qgq a)
     (transport DGraphQuotient (gqglue s) x))^) @
 ap10
   (dpath_arrow DGraphQuotient
      (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
      (Qgq a) (Qgq b)
      (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
       transport_const (gqglue s) (Qgq a y) @
       (Qgqglue a b s y @
        <span class="kr">match</span>
          (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
          <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
        <span class="kr">with</span>
        | <span class="mi">1</span> =&gt; <span class="mi">1</span>
        <span class="kr">end</span>))) (transport DGraphQuotient (gqglue s) x)) @
((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk48"><span class="kp">do</span> <span class="mi">3</span> lhs nrapply concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_const (gqglue s) (Qgq a x))^ @
((ap
    (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
     transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
       (gqglue s) (Qgq a x))
    (transport_Vp DGraphQuotient (gqglue s) x))^ @
 ((transport_arrow (gqglue s) (Qgq a)
     (transport DGraphQuotient (gqglue s) x))^ @
  (ap10
     (dpath_arrow DGraphQuotient
        (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
        (Qgq a) (Qgq b)
        (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
         transport_const (gqglue s) (Qgq a y) @
         (Qgqglue a b s y @
          <span class="kr">match</span>
            (transport_DGraphQuotient s y)^ <span class="kr">in</span>
            (_ = a0)
            <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; <span class="mi">1</span>
          <span class="kr">end</span>)))
     (transport DGraphQuotient (gqglue s) x) @
   ((ap (Qgq b) (transport_DGraphQuotient s x))^)^))) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk49"><span class="nb">apply</span> moveR_Vp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
((transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^ @
 (ap10
    (dpath_arrow DGraphQuotient
       (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s)
       (Qgq a) (Qgq b)
       (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
        transport_const (gqglue s) (Qgq a y) @
        (Qgqglue a b s y @
         <span class="kr">match</span>
           (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
           <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt; <span class="mi">1</span>
         <span class="kr">end</span>)))
    (transport DGraphQuotient (gqglue s) x) @
  ((ap (Qgq b) (transport_DGraphQuotient s x))^)^)) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk4a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk4a">lhs <span class="nb">refine</span> (<span class="mi">1</span> @@ (<span class="mi">1</span> @@ (_ @@ <span class="mi">1</span>))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap10
  (dpath_arrow DGraphQuotient
     (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q) (gqglue s) (Qgq a)
     (Qgq b)
     (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
      transport_const (gqglue s) (Qgq a y) @
      (Qgqglue a b s y @
       <span class="kr">match</span>
         (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
         <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
       <span class="kr">with</span>
       | <span class="mi">1</span> =&gt; <span class="mi">1</span>
       <span class="kr">end</span>))) (transport DGraphQuotient (gqglue s) x) =
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk4b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk4b"><hr></label><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
((transport_arrow (gqglue s) 
    (Qgq a) (transport DGraphQuotient (gqglue s) x))^ @
 (<span class="nl">?Goal</span> @
  ((ap (Qgq b) (transport_DGraphQuotient s x))^)^)) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk4c"><span class="mi">1</span>: nrapply (ap10_dpath_arrow DGraphQuotient (<span class="kr">fun</span> <span class="nv">_</span> =&gt; Q) (gqglue s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
((transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^ @
 (((transport_arrow (gqglue s) (Qgq a)
      (transport DGraphQuotient (gqglue s) x) @
    ap
      (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
       transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
         (gqglue s) (Qgq a x))
      (transport_Vp DGraphQuotient (gqglue s) x)) @
   (<span class="kr">fun</span> <span class="nv">y</span> : F a =&gt;
    transport_const (gqglue s) (Qgq a y) @
    (Qgqglue a b s y @
     <span class="kr">match</span>
       (transport_DGraphQuotient s y)^ <span class="kr">in</span> (_ = a0)
       <span class="kr">return</span> (Qgq b (e a b s y) = Qgq b a0)
     <span class="kr">with</span>
     | <span class="mi">1</span> =&gt; <span class="mi">1</span>
     <span class="kr">end</span>)) x) @
  ((ap (Qgq b) (transport_DGraphQuotient s x))^)^)) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk4d">lhs <span class="nb">refine</span> (<span class="mi">1</span> @@ (<span class="mi">1</span> @@ _)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x) @
  ap
    (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
     transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
       (gqglue s) (Qgq a x))
    (transport_Vp DGraphQuotient (gqglue s) x)) @
 (transport_const (gqglue s) (Qgq a x) @
  (Qgqglue a b s x @
   <span class="kr">match</span>
     (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
     <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
   <span class="kr">with</span>
   | <span class="mi">1</span> =&gt; <span class="mi">1</span>
   <span class="kr">end</span>))) @
((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
<span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk4e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk4e"><hr></label><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
((transport_arrow (gqglue s) 
    (Qgq a) (transport DGraphQuotient (gqglue s) x))^ @
 <span class="nl">?Goal</span>) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk4f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk4f">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x) @
  ap
    (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
     transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
       (gqglue s) (Qgq a x))
    (transport_Vp DGraphQuotient (gqglue s) x)) @
 (transport_const (gqglue s) (Qgq a x) @
  (Qgqglue a b s x @
   <span class="kr">match</span>
     (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
     <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
   <span class="kr">with</span>
   | <span class="mi">1</span> =&gt; <span class="mi">1</span>
   <span class="kr">end</span>))) @
((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
<span class="nl">?Goal</span></div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk50" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk50">lhs nrapply concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_arrow (gqglue s) (Qgq a)
   (transport DGraphQuotient (gqglue s) x) @
 ap
   (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x)) @
((transport_const (gqglue s) (Qgq a x) @
  (Qgqglue a b s x @
   <span class="kr">match</span>
     (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
     <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
   <span class="kr">with</span>
   | <span class="mi">1</span> =&gt; <span class="mi">1</span>
   <span class="kr">end</span>)) @
 ((ap (Qgq b) (transport_DGraphQuotient s x))^)^) =
<span class="nl">?Goal</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply concat_pp_p.</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk51">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
((transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x))^ @
 (transport_arrow (gqglue s) (Qgq a)
    (transport DGraphQuotient (gqglue s) x) @
  (ap
     (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
      transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
        (gqglue s) (Qgq a x))
     (transport_Vp DGraphQuotient (gqglue s) x) @
   ((transport_const (gqglue s) (Qgq a x) @
     (Qgqglue a b s x @
      <span class="kr">match</span>
        (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
        <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; <span class="mi">1</span>
      <span class="kr">end</span>)) @
    ((ap (Qgq b) (transport_DGraphQuotient s x))^)^)))) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk52">lhs nrapply (<span class="mi">1</span> @@ concat_V_pp _ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : F a =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x))^ @
(ap
   (<span class="kr">fun</span> <span class="nv">x</span> : DGraphQuotient (gq a) =&gt;
    transport (<span class="kr">fun</span> <span class="nv">_</span> : GraphQuotient R =&gt; Q)
      (gqglue s) (Qgq a x))
   (transport_Vp DGraphQuotient (gqglue s) x) @
 ((transport_const (gqglue s) (Qgq a x) @
   (Qgqglue a b s x @
    <span class="kr">match</span>
      (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
      <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
    <span class="kr">with</span>
    | <span class="mi">1</span> =&gt; <span class="mi">1</span>
    <span class="kr">end</span>)) @
  ((ap (Qgq b) (transport_DGraphQuotient s x))^)^)) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk53" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk53">lhs nrapply concat_V_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(transport_const (gqglue s) (Qgq a x) @
 (Qgqglue a b s x @
  <span class="kr">match</span>
    (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
    <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
  <span class="kr">with</span>
  | <span class="mi">1</span> =&gt; <span class="mi">1</span>
  <span class="kr">end</span>)) @
((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk54">lhs nrapply concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport_const (gqglue s) (Qgq a x) @
((Qgqglue a b s x @
  <span class="kr">match</span>
    (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
    <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
  <span class="kr">with</span>
  | <span class="mi">1</span> =&gt; <span class="mi">1</span>
  <span class="kr">end</span>) @
 ((ap (Qgq b) (transport_DGraphQuotient s x))^)^) =
transport_const (gqglue s) (Qgq a x) @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk55">f_ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(Qgqglue a b s x @
 <span class="kr">match</span>
   (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
   <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
 <span class="kr">with</span>
 | <span class="mi">1</span> =&gt; <span class="mi">1</span>
 <span class="kr">end</span>) @
((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk56">lhs nrapply concat_pp_p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Qgqglue a b s x @
(<span class="kr">match</span>
   (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
   <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
 <span class="kr">with</span>
 | <span class="mi">1</span> =&gt; <span class="mi">1</span>
 <span class="kr">end</span> @ ((ap (Qgq b) (transport_DGraphQuotient s x))^)^) =
Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk57"><span class="nb">apply</span> moveR_Mp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
  <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span> @ ((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
(Qgqglue a b s x)^ @ Qgqglue a b s x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk58">rhs nrapply concat_Vp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
  <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span> @ ((ap (Qgq b) (transport_DGraphQuotient s x))^)^ =
<span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk59"><span class="nb">apply</span> moveR_pV.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
  <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span> = <span class="mi">1</span> @ (ap (Qgq b) (transport_DGraphQuotient s x))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk5a">rhs nrapply concat_1p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>Qgq</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> : A, F a -&gt; Q</span></span></span><br><span><var>Qgqglue</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) 
(<span class="nv">x</span> : F a), Qgq a x = Qgq b (e a b r x)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">match</span>
  (transport_DGraphQuotient s x)^ <span class="kr">in</span> (_ = a0)
  <span class="kr">return</span> (Qgq b (e a b s x) = Qgq b a0)
<span class="kr">with</span>
| <span class="mi">1</span> =&gt; <span class="mi">1</span>
<span class="kr">end</span> = (ap (Qgq b) (transport_DGraphQuotient s x))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply ap_V.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
  <span class="sd">(** Now that we&#39;ve shown that [sig DGraphQuotient] acts like a [GraphQuotient] of [sig F] by an appropriate relation, we can use this to prove the flattening lemma. The maps back and forth are very easy so this could almost be a formal consequence of the induction principle. *)</span> 
</span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk5b"><span class="kn">Lemma</span> <span class="nf">equiv_gq_flatten</span>
    : sig DGraphQuotient
    &lt;~&gt; GraphQuotient (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> =&gt; {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e _ _ r a.<span class="mi">2</span> = b.<span class="mi">2</span>}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} &lt;~&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk5c"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} &lt;~&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk5d">snrapply equiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} -&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk5e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk5e"><hr></label><div class="goal-conclusion">GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>}) -&gt;
{x : _ &amp; DGraphQuotient x}</div></blockquote><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk5f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk5f"><hr></label><div class="goal-conclusion"><span class="nl">?f</span> o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk60" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk60"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o <span class="nl">?f</span> == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk61" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk61">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; DGraphQuotient x} -&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk62" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk62">snrapply flatten_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
F a -&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a0.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b.<span class="mi">1</span> r a0.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk63" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk63"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a),
<span class="nl">?Qgq</span> a x = <span class="nl">?Qgq</span> b (e a b s x)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk64">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
F a -&gt;
GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a0.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b.<span class="mi">1</span> r a0.<span class="mi">2</span> = b.<span class="mi">2</span>})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">x</span> =&gt; gq (a; x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk65">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a),
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; gq (a0; x0)) a x =
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; gq (a0; x0)) b
  (e a b s x)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk66" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk66"><span class="nb">intros</span> a b r x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x)) a x =
(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x)) b (e a b r x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk67" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk67"><span class="nb">apply</span> gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{r0 : R (a; x).<span class="mi">1</span> (b; e a b r x).<span class="mi">1</span> &amp;
e (a; x).<span class="mi">1</span> (b; e a b r x).<span class="mi">1</span> r0 (a; x).<span class="mi">2</span> =
(b; e a b r x).<span class="mi">2</span>}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk68"><span class="kr">exists</span> <span class="nv">r</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">e (a; x).<span class="mi">1</span> (b; e a b r x).<span class="mi">1</span> r (a; x).<span class="mi">2</span> =
(b; e a b r x).<span class="mi">2</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk69" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk69">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient
  (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
   {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>}) -&gt;
{x : _ &amp; DGraphQuotient x}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6a">snrapply GraphQuotient_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; F x} -&gt; {x : _ &amp; DGraphQuotient x}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk6b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk6b"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x},
(<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
 {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) a b -&gt;
<span class="nl">?c</span> a = <span class="nl">?c</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6c">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">{x : _ &amp; F x} -&gt; {x : _ &amp; DGraphQuotient x}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (<span class="kr">fun</span> &#39;(a; x) =&gt; (gq a; x)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6d">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x},
(<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
 {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) a b -&gt;
(<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
 <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a0</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x0)) a =
(<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
 <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a0</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x0)) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6e"><span class="nb">intros</span> [a x] [b y] [r p].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>F b</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> = (b; y).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">x</span> := (a; x) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)) =
(<span class="kr">let</span> <span class="nv">x</span> := (b; y) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk6f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk6f"><span class="nb">simpl</span> <span class="kr">in</span> p, r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>F b</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>e a b r x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">x</span> := (a; x) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)) =
(<span class="kr">let</span> <span class="nv">x</span> := (b; y) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk70" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk70"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">let</span> <span class="nv">x</span> := (a; x) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)) =
(<span class="kr">let</span> <span class="nv">x</span> := (b; e a b r x) <span class="kr">in</span>
 <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> flatten_gqglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk71" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk71">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
   gqglue (r; <span class="mi">1</span>))
o GraphQuotient_rec
    (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
     <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
     <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))
    (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
     (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
      (<span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">y</span> : F b)
         (<span class="nv">X</span> : {r : R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> &amp;
              e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> =
              (b; y).<span class="mi">2</span>}) =&gt;
       (<span class="kr">fun</span> (<span class="nv">r</span> : R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span>)
          (<span class="nv">p</span> : e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> =
               (b; y).<span class="mi">2</span>) =&gt;
        <span class="kr">match</span>
          p <span class="kr">in</span> (_ = f)
          <span class="kr">return</span>
            ((<span class="kr">let</span> <span class="nv">x0</span> := (a; x) <span class="kr">in</span>
              <span class="kr">let</span> <span class="nv">a1</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
              <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a1; x1)) =
             (<span class="kr">let</span> <span class="nv">x0</span> := (b; f) <span class="kr">in</span>
              <span class="kr">let</span> <span class="nv">a1</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
              <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a1; x1)))
        <span class="kr">with</span>
        | <span class="mi">1</span> =&gt; flatten_gqglue r x
        <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk72" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk72">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : {x : _ &amp; F x},
(<span class="kr">fun</span>
   <span class="nv">x</span> : GraphQuotient
         (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
          {r : R a0.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b.<span class="mi">1</span> r a0.<span class="mi">2</span> = b.<span class="mi">2</span>})
 =&gt;
 (flatten_rec
    (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; gq (a0; x0))
    (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a0 b) (<span class="nv">x0</span> : F a0) =&gt;
     gqglue (r; <span class="mi">1</span>))
  o GraphQuotient_rec
      (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
       <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
       <span class="kr">let</span> <span class="nv">a0</span> := x0.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x1))
      (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
       (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x0</span> : F a1) (<span class="nv">b0</span> : {x : _ &amp; F x})
        =&gt;
        (<span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">y</span> : F b)
           (<span class="nv">X</span> : {r : R (a1; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> &amp;
                e (a1; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                (b; y).<span class="mi">2</span>}) =&gt;
         (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span>)
            (<span class="nv">p</span> : e (a1; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                 (b; y).<span class="mi">2</span>) =&gt;
          <span class="kr">match</span>
            p <span class="kr">in</span> (_ = f) <span class="kr">return</span> ((...) = (...))
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; flatten_gqglue r x0
          <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)) x =
 idmap x) (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk73" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk73"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x})
(<span class="nv">s</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
      {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) a
       b),
transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
            {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp;
            e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) =&gt;
   (flatten_rec
      (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; gq (a0; x0))
      (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A) (<span class="nv">r</span> : R a0 b0) (<span class="nv">x0</span> : F a0) =&gt;
       gqglue (r; <span class="mi">1</span>))
    o GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
         <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">a0</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x1))
        (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
         (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x0</span> : F a1)
            (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
          (<span class="kr">fun</span> (<span class="nv">b1</span> : A) (<span class="nv">y</span> : F b1)
             (<span class="nv">X</span> : {r : R (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> &amp;
                  e (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                  (b1; y).<span class="mi">2</span>}) =&gt;
           (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span>)
              (<span class="nv">p</span> : e (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                   (b1; y).<span class="mi">2</span>) =&gt;
            <span class="kr">match</span> p <span class="kr">in</span> (_ = f) <span class="kr">return</span> (... = ...) <span class="kr">with</span>
            | <span class="mi">1</span> =&gt; flatten_gqglue r x0
            <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)) x =
   idmap x) (gqglue s) (<span class="nl">?gq&#39;</span> a) = <span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk74" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk74"><span class="mi">1</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x})
(<span class="nv">s</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
      {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp; e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) a
       b),
transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x} =&gt;
            {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp;
            e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) =&gt;
   (flatten_rec
      (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; gq (a0; x0))
      (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A) (<span class="nv">r</span> : R a0 b0) (<span class="nv">x0</span> : F a0) =&gt;
       gqglue (r; <span class="mi">1</span>))
    o GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
         <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">a0</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x1))
        (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
         (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x0</span> : F a1)
            (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
          (<span class="kr">fun</span> (<span class="nv">b1</span> : A) (<span class="nv">y</span> : F b1)
             (<span class="nv">X</span> : {r : R (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> &amp;
                  e (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                  (b1; y).<span class="mi">2</span>}) =&gt;
           (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span>)
              (<span class="nv">p</span> : e (a1; x0).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x0).<span class="mi">2</span> =
                   (b1; y).<span class="mi">2</span>) =&gt;
            <span class="kr">match</span> p <span class="kr">in</span> (_ = f) <span class="kr">return</span> (... = ...) <span class="kr">with</span>
            | <span class="mi">1</span> =&gt; flatten_gqglue r x0
            <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)) x =
   idmap x) (gqglue s)
  ((<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt; <span class="mi">1</span>) a) =
(<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt; <span class="mi">1</span>) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk75" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk75"><span class="nb">intros</span> [a x] [b y] [r p].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>F b</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span></span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> = (b; y).<span class="mi">2</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
            {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})
   =&gt;
   flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) =&gt; gq (a; x0))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x0</span> : F a) =&gt;
      gqglue (r; <span class="mi">1</span>))
     (GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
         <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
           (<span class="nv">X</span> : {r : R (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> &amp;
                e (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> r
                  (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">2</span> = (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">2</span>}) =&gt;
         <span class="kr">match</span>
           X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
           <span class="kr">return</span>
             ((<span class="kr">let</span> <span class="nv">x0</span> := (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)) =
              (<span class="kr">let</span> <span class="nv">x0</span> := (b0.<span class="mi">1</span>; f) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)))
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
         <span class="kr">end</span>) x) = x) (gqglue (r; p)) <span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk76" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk76"><span class="nb">simpl</span> <span class="kr">in</span> p, r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>y</var><span class="hyp-type"><b>: </b><span>F b</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>e a b r x = y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
            {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})
   =&gt;
   flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) =&gt; gq (a; x0))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x0</span> : F a) =&gt;
      gqglue (r; <span class="mi">1</span>))
     (GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
         <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
           (<span class="nv">X</span> : {r : R (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> &amp;
                e (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> r
                  (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">2</span> = (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">2</span>}) =&gt;
         <span class="kr">match</span>
           X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
           <span class="kr">return</span>
             ((<span class="kr">let</span> <span class="nv">x0</span> := (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)) =
              (<span class="kr">let</span> <span class="nv">x0</span> := (b0.<span class="mi">1</span>; f) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)))
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
         <span class="kr">end</span>) x) = x) (gqglue (r; p)) <span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk77" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk77"><span class="nb">destruct</span> p.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
            {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})
   =&gt;
   flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) =&gt; gq (a; x0))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x0</span> : F a) =&gt;
      gqglue (r; <span class="mi">1</span>))
     (GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
         <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
         <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
           (<span class="nv">X</span> : {r : R (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> &amp;
                e (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> r
                  (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">2</span> = (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">2</span>}) =&gt;
         <span class="kr">match</span>
           X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
           <span class="kr">return</span>
             ((<span class="kr">let</span> <span class="nv">x0</span> := (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)) =
              (<span class="kr">let</span> <span class="nv">x0</span> := (b0.<span class="mi">1</span>; f) <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
               <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1)))
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
         <span class="kr">end</span>) x) = x) (gqglue (r; <span class="mi">1</span>)) <span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk78" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk78"><span class="nb">simpl</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : {x : _ &amp; F x} =&gt;
            {r : R a.<span class="mi">1</span> b.<span class="mi">1</span> &amp; e a.<span class="mi">1</span> b.<span class="mi">1</span> r a.<span class="mi">2</span> = b.<span class="mi">2</span>})
   =&gt;
   flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) =&gt; gq (a; x0))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x0</span> : F a) =&gt;
      gqglue (r; <span class="mi">1</span>))
     (GraphQuotient_rec
        (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt; (gq pat.<span class="mi">1</span>; pat.<span class="mi">2</span>))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
           (<span class="nv">X</span> : {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp;
                e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) =&gt;
         <span class="kr">match</span>
           X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
           <span class="kr">return</span> ((gq a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) = (gq b0.<span class="mi">1</span>; f))
         <span class="kr">with</span>
         | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
         <span class="kr">end</span>) x) = x) (gqglue (r; <span class="mi">1</span>)) <span class="mi">1</span> = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk79" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk79">lhs nrapply transport_paths_FFlr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((ap
    (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
       (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
        gqglue (r; <span class="mi">1</span>)))
    (ap
       (GraphQuotient_rec
          (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
           (gq pat.<span class="mi">1</span>; pat.<span class="mi">2</span>))
          (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
             (<span class="nv">X</span> : {r : R a0.<span class="mi">1</span> b0.<span class="mi">1</span> &amp;
                  e a0.<span class="mi">1</span> b0.<span class="mi">1</span> r a0.<span class="mi">2</span> = b0.<span class="mi">2</span>}) =&gt;
           <span class="kr">match</span>
             X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
             <span class="kr">return</span> ((gq a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) = (gq b0.<span class="mi">1</span>; f))
           <span class="kr">with</span>
           | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
           <span class="kr">end</span>)) (gqglue (r; <span class="mi">1</span>))))^ @ <span class="mi">1</span>) @
gqglue (r; <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7a"><span class="nb">rewrite</span> GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">((ap
    (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
       (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
        gqglue (r; <span class="mi">1</span>))) (flatten_gqglue r x))^ @ <span class="mi">1</span>) @
gqglue (r; <span class="mi">1</span>) = <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7b"><span class="nb">refine</span> ((_ @@ <span class="mi">1</span>) @ concat_Vp _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
      (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
       gqglue (r; <span class="mi">1</span>))) (flatten_gqglue r x))^ @ <span class="mi">1</span> =
(gqglue (r; <span class="mi">1</span>))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7c">lhs nrapply concat_p1.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap
   (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
      (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
       gqglue (r; <span class="mi">1</span>))) (flatten_gqglue r x))^ =
(gqglue (r; <span class="mi">1</span>))^</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7d"><span class="nb">apply</span> inverse2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
      gqglue (r; <span class="mi">1</span>))) (flatten_gqglue r x) =
gqglue (r; <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply flatten_rec_beta_gqglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient_rec
  (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
   <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
   <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))
  (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
   (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
    (<span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">y</span> : F b)
       (<span class="nv">X</span> : {r : R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> &amp;
            e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> = (b; y).<span class="mi">2</span>})
     =&gt;
     (<span class="kr">fun</span> (<span class="nv">r</span> : R (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span>)
        (<span class="nv">p</span> : e (a; x).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x).<span class="mi">2</span> = (b; y).<span class="mi">2</span>)
      =&gt;
      <span class="kr">match</span>
        p <span class="kr">in</span> (_ = f)
        <span class="kr">return</span>
          ((<span class="kr">let</span> <span class="nv">x0</span> := (a; x) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a1</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a1; x1)) =
           (<span class="kr">let</span> <span class="nv">x0</span> := (b; f) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a1</span> := x0.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a1; x1)))
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; flatten_gqglue r x
      <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)
o flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
    (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
     gqglue (r; <span class="mi">1</span>)) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk7f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk7f">snrapply flatten_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a),
(<span class="kr">fun</span> <span class="nv">x0</span> : {x : _ &amp; DGraphQuotient x} =&gt;
 (GraphQuotient_rec
    (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
     <span class="kr">let</span> <span class="nv">x1</span> := pat <span class="kr">in</span>
     <span class="kr">let</span> <span class="nv">a0</span> := x1.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x2</span> := x1.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x2))
    (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
     (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x1</span> : F a1) (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
      (<span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">y</span> : F b)
         (<span class="nv">X</span> : {r : R (a1; x1).<span class="mi">1</span> (b; y).<span class="mi">1</span> &amp;
              e (a1; x1).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
              (b; y).<span class="mi">2</span>}) =&gt;
       (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x1).<span class="mi">1</span> (b; y).<span class="mi">1</span>)
          (<span class="nv">p</span> : e (a1; x1).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
               (b; y).<span class="mi">2</span>) =&gt;
        <span class="kr">match</span> p <span class="kr">in</span> (_ = f) <span class="kr">return</span> ((...) = (...)) <span class="kr">with</span>
        | <span class="mi">1</span> =&gt; flatten_gqglue r x1
        <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)
  o flatten_rec
      (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x1</span> : F a0) =&gt; gq (a0; x1))
      (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a0 b) (<span class="nv">x1</span> : F a0) =&gt;
       gqglue (r; <span class="mi">1</span>))) x0 = idmap x0) (flatten_gq x)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk80" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk80"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a),
transport
  (<span class="kr">fun</span> <span class="nv">x0</span> : {x : _ &amp; DGraphQuotient x} =&gt;
   (GraphQuotient_rec
      (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
       <span class="kr">let</span> <span class="nv">x1</span> := pat <span class="kr">in</span>
       <span class="kr">let</span> <span class="nv">a0</span> := x1.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x2</span> := x1.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x2))
      (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
       (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x1</span> : F a1) (<span class="nv">b0</span> : {x : _ &amp; F x})
        =&gt;
        (<span class="kr">fun</span> (<span class="nv">b1</span> : A) (<span class="nv">y</span> : F b1)
           (<span class="nv">X</span> : {r : R (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> &amp;
                e (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
                (b1; y).<span class="mi">2</span>}) =&gt;
         (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span>)
            (<span class="nv">p</span> : e (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
                 (b1; y).<span class="mi">2</span>) =&gt;
          <span class="kr">match</span> p <span class="kr">in</span> (_ = f) <span class="kr">return</span> (... = ...) <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; flatten_gqglue r x1
          <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)
    o flatten_rec
        (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x1</span> : F a0) =&gt; gq (a0; x1))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A) (<span class="nv">r</span> : R a0 b0) (<span class="nv">x1</span> : F a0) =&gt;
         gqglue (r; <span class="mi">1</span>))) x0 = idmap x0)
  (flatten_gqglue s x) (<span class="nl">?Qgq</span> a x) = <span class="nl">?Qgq</span> b (e a b s x)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk81" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk81"><span class="mi">1</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b) (<span class="nv">x</span> : F a),
transport
  (<span class="kr">fun</span> <span class="nv">x0</span> : {x : _ &amp; DGraphQuotient x} =&gt;
   (GraphQuotient_rec
      (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
       <span class="kr">let</span> <span class="nv">x1</span> := pat <span class="kr">in</span>
       <span class="kr">let</span> <span class="nv">a0</span> := x1.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x2</span> := x1.<span class="mi">2</span> <span class="kr">in</span> (gq a0; x2))
      (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
       (<span class="kr">fun</span> (<span class="nv">a1</span> : A) (<span class="nv">x1</span> : F a1) (<span class="nv">b0</span> : {x : _ &amp; F x})
        =&gt;
        (<span class="kr">fun</span> (<span class="nv">b1</span> : A) (<span class="nv">y</span> : F b1)
           (<span class="nv">X</span> : {r : R (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> &amp;
                e (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
                (b1; y).<span class="mi">2</span>}) =&gt;
         (<span class="kr">fun</span> (<span class="nv">r</span> : R (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span>)
            (<span class="nv">p</span> : e (a1; x1).<span class="mi">1</span> (b1; y).<span class="mi">1</span> r (a1; x1).<span class="mi">2</span> =
                 (b1; y).<span class="mi">2</span>) =&gt;
          <span class="kr">match</span> p <span class="kr">in</span> (_ = f) <span class="kr">return</span> (... = ...) <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; flatten_gqglue r x1
          <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)
    o flatten_rec
        (<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x1</span> : F a0) =&gt; gq (a0; x1))
        (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A) (<span class="nv">r</span> : R a0 b0) (<span class="nv">x1</span> : F a0) =&gt;
         gqglue (r; <span class="mi">1</span>))) x0 = idmap x0)
  (flatten_gqglue s x)
  ((<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; <span class="mi">1</span>) a x) =
(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">x0</span> : F a0) =&gt; <span class="mi">1</span>) b (e a b s x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk82" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk82"><span class="nb">intros</span> a b r x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : {x : _ &amp; DGraphQuotient x} =&gt;
   (GraphQuotient_rec
      (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
       <span class="kr">let</span> <span class="nv">x0</span> := pat <span class="kr">in</span>
       <span class="kr">let</span> <span class="nv">a</span> := x0.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x1</span> := x0.<span class="mi">2</span> <span class="kr">in</span> (gq a; x1))
      (<span class="kr">fun</span> <span class="nv">a0</span> : {x : _ &amp; F x} =&gt;
       (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) (<span class="nv">b0</span> : {x : _ &amp; F x}) =&gt;
        (<span class="kr">fun</span> (<span class="nv">b</span> : A) (<span class="nv">y</span> : F b)
           (<span class="nv">X</span> : {r : R (a; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> &amp;
                e (a; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x0).<span class="mi">2</span> =
                (b; y).<span class="mi">2</span>}) =&gt;
         (<span class="kr">fun</span> (<span class="nv">r</span> : R (a; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span>)
            (<span class="nv">p</span> : e (a; x0).<span class="mi">1</span> (b; y).<span class="mi">1</span> r (a; x0).<span class="mi">2</span> =
                 (b; y).<span class="mi">2</span>) =&gt;
          <span class="kr">match</span>
            p <span class="kr">in</span> (_ = f) <span class="kr">return</span> ((...) = (...))
          <span class="kr">with</span>
          | <span class="mi">1</span> =&gt; flatten_gqglue r x0
          <span class="kr">end</span>) X.<span class="mi">1</span> X.<span class="mi">2</span>) b0.<span class="mi">1</span> b0.<span class="mi">2</span>) a0.<span class="mi">1</span> a0.<span class="mi">2</span>)
    o flatten_rec
        (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x0</span> : F a) =&gt; gq (a; x0))
        (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x0</span> : F a) =&gt;
         gqglue (r; <span class="mi">1</span>))) x = idmap x)
  (flatten_gqglue r x)
  ((<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; <span class="mi">1</span>) a x) =
(<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; <span class="mi">1</span>) b (e a b r x)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk83" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk83">nrapply (transport_paths_FFlr&#39; (g := GraphQuotient_rec _ _)); <span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (GraphQuotient_rec
     (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
      <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))
     (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
        (<span class="nv">X</span> : {r : R (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> &amp;
             e (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> r
               (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">2</span> = (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">2</span>}) =&gt;
      <span class="kr">match</span>
        X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
        <span class="kr">return</span>
          ((<span class="kr">let</span> <span class="nv">x</span> := (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)) =
           (<span class="kr">let</span> <span class="nv">x</span> := (b0.<span class="mi">1</span>; f) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)))
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
      <span class="kr">end</span>))
  (ap
     (flatten_rec (<span class="kr">fun</span> (<span class="nv">a</span> : A) (<span class="nv">x</span> : F a) =&gt; gq (a; x))
        (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) (<span class="nv">x</span> : F a) =&gt;
         gqglue (r; <span class="mi">1</span>))) (flatten_gqglue r x)) =
flatten_gqglue r x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk84" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk84"><span class="nb">rewrite</span> flatten_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H</var><span class="hyp-type"><b>: </b><span>Univalence</span></span></span><br><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>F</var><span class="hyp-type"><b>: </b><span>A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R x y -&gt; F x &lt;~&gt; F y</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>F a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (GraphQuotient_rec
     (<span class="kr">fun</span> <span class="nv">pat</span> : {x : _ &amp; F x} =&gt;
      <span class="kr">let</span> <span class="nv">x</span> := pat <span class="kr">in</span>
      <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span> <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0))
     (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : {x : _ &amp; F x})
        (<span class="nv">X</span> : {r : R (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> &amp;
             e (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">1</span> (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">1</span> r
               (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>).<span class="mi">2</span> = (b0.<span class="mi">1</span>; b0.<span class="mi">2</span>).<span class="mi">2</span>}) =&gt;
      <span class="kr">match</span>
        X.<span class="mi">2</span> <span class="kr">in</span> (_ = f)
        <span class="kr">return</span>
          ((<span class="kr">let</span> <span class="nv">x</span> := (a0.<span class="mi">1</span>; a0.<span class="mi">2</span>) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)) =
           (<span class="kr">let</span> <span class="nv">x</span> := (b0.<span class="mi">1</span>; f) <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">a</span> := x.<span class="mi">1</span> <span class="kr">in</span>
            <span class="kr">let</span> <span class="nv">x0</span> := x.<span class="mi">2</span> <span class="kr">in</span> (gq a; x0)))
      <span class="kr">with</span>
      | <span class="mi">1</span> =&gt; flatten_gqglue X.<span class="mi">1</span> a0.<span class="mi">2</span>
      <span class="kr">end</span>)) (gqglue (r; <span class="mi">1</span>)) = flatten_gqglue r x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (GraphQuotient_rec_beta_gqglue _ _ (a; x) (b; e a b r x) (r; <span class="mi">1</span>)).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Flattening</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Functoriality of graph quotients *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk85" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk85"><span class="kn">Lemma</span> <span class="nf">functor_gq</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B)
  {<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>} {<span class="nv">S</span> : B -&gt; B -&gt; <span class="kt">Type</span>} (<span class="nv">e</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; S (f a) (f b))
  : GraphQuotient R -&gt; GraphQuotient S.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient R -&gt; GraphQuotient S</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk86" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk86"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient R -&gt; GraphQuotient S</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk87" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk87">snrapply GraphQuotient_rec.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">A -&gt; GraphQuotient S</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk88" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk88"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; <span class="nl">?c</span> a = <span class="nl">?c</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk89" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk89"><span class="mi">1</span>: <span class="bp">exact</span> (<span class="kr">fun</span> <span class="nv">x</span> =&gt; gq (f x)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A,
R a b -&gt;
(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; gq (f x)) a = (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; gq (f x)) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8a"><span class="nb">intros</span> a b r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; gq (f x)) a = (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; gq (f x)) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8b"><span class="nb">apply</span> gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (f a) (f b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8c"><span class="nb">apply</span> e.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R a b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> r.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8d"><span class="kn">Lemma</span> <span class="nf">functor_gq_idmap</span> {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>}
  : functor_gq (A:=A) (B:=A) (S:=R) idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">r</span> =&gt; r) == idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8e"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap) == idmap</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk8f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk8f">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span>
   <span class="nv">x</span> : GraphQuotient
         (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b</span> : A =&gt; R (idmap a0) (idmap b)) =&gt;
 functor_gq idmap (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b</span> : A =&gt; idmap) x = idmap x)
  (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk90" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk90"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A)
(<span class="nv">s</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R (idmap a0) (idmap b0)) a b),
transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R (idmap a0) (idmap b0))
   =&gt;
   functor_gq idmap (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; idmap) x =
   idmap x) (gqglue s) (<span class="nl">?gq&#39;</span> a) = <span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk91" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk91"><span class="mi">1</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A)
(<span class="nv">s</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R (idmap a0) (idmap b0)) a b),
transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R (idmap a0) (idmap b0))
   =&gt;
   functor_gq idmap (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; idmap) x =
   idmap x) (gqglue s) ((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a) =
(<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk92" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk92"><span class="nb">intros</span> a b r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; R (idmap a) (idmap b)) a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span>
     <span class="nv">x</span> : GraphQuotient
           (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; R (idmap a) (idmap b)) =&gt;
   functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap) x = idmap x)
  (gqglue r) ((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) a) = (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk93" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk93">nrapply (transport_paths_FlFr&#39; (gqglue r)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; R (idmap a) (idmap b)) a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap))
  (gqglue r) @ <span class="mi">1</span> = <span class="mi">1</span> @ ap idmap (gqglue r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk94" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk94"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; R (idmap a) (idmap b)) a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap))
  (gqglue r) = ap idmap (gqglue r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk95" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk95">rhs nrapply ap_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>(<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; R (idmap a) (idmap b)) a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap))
  (gqglue r) = gqglue r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply GraphQuotient_rec_beta_gqglue.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk96" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk96"><span class="kn">Lemma</span> <span class="nf">functor_gq_compose</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) (<span class="nv">g</span> : B -&gt; C)
  {<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>} {<span class="nv">S</span> : B -&gt; B -&gt; <span class="kt">Type</span>} {<span class="nv">T</span> : C -&gt; C -&gt; <span class="kt">Type</span>}
  (<span class="nv">e</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; S (f a) (f b)) (<span class="nv">e&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, S a b -&gt; T (g a) (g b))
  : functor_gq g e&#39; o (functor_gq f e) == functor_gq (g o f) (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">r</span> =&gt; e&#39; _ _ (e _ _ r)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq g e&#39; o functor_gq f e ==
functor_gq (g o f)
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R a0 b0) a b)
   =&gt; e&#39; (f a) (f b) (e a b r))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk97" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk97"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq g e&#39; o functor_gq f e ==
functor_gq (g o f)
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R a0 b0) a b)
   =&gt; e&#39; (f a) (f b) (e a b r))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk98" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk98">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
 (functor_gq g e&#39; o functor_gq f e) x =
 functor_gq (g o f)
   (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b</span> : A)
      (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a1</span> <span class="nv">b0</span> : A =&gt; R a1 b0) a0 b) =&gt;
    e&#39; (f a0) (f b) (e a0 b r)) x) (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chk99" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chk99"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   (functor_gq g e&#39; o functor_gq f e) x =
   functor_gq (g o f)
     (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A)
        (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a1</span> <span class="nv">b1</span> : A =&gt; R a1 b1) a0 b0) =&gt;
      e&#39; (f a0) (f b0) (e a0 b0 r)) x) (gqglue s)
  (<span class="nl">?gq&#39;</span> a) = <span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9a" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9a"><span class="mi">1</span>: <span class="bp">reflexivity</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   (functor_gq g e&#39; o functor_gq f e) x =
   functor_gq (g o f)
     (<span class="kr">fun</span> (<span class="nv">a0</span> <span class="nv">b0</span> : A)
        (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a1</span> <span class="nv">b1</span> : A =&gt; R a1 b1) a0 b0) =&gt;
      e&#39; (f a0) (f b0) (e a0 b0 r)) x) (gqglue s)
  ((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) a) = (<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; <span class="mi">1</span>) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9b" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9b"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   (functor_gq g e&#39; o functor_gq f e) x =
   functor_gq (g o f)
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A)
        (<span class="nv">r</span> : (<span class="kr">fun</span> <span class="nv">a0</span> <span class="nv">b0</span> : A =&gt; R a0 b0) a b) =&gt;
      e&#39; (f a) (f b) (e a b r)) x) (gqglue s)
  ((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) a) = (<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; <span class="mi">1</span>) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9c" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9c">nrapply (transport_paths_FlFr&#39; (gqglue s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   functor_gq g e&#39; (functor_gq f e x)) (gqglue s) @ <span class="mi">1</span> =
<span class="mi">1</span> @
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9d" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9d"><span class="nb">apply</span> equiv_p1_1q.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   functor_gq g e&#39; (functor_gq f e x)) (gqglue s) =
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9e" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9e">lhs nrapply (ap_compose (functor_gq f e) (functor_gq g e&#39;) (gqglue s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq g e&#39;) (ap (functor_gq f e) (gqglue s)) =
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chk9f" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chk9f">lhs nrapply ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq f e) (gqglue s) = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chka0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chka0"><hr></label><div class="goal-conclusion">ap (functor_gq g e&#39;) <span class="nl">?Goal</span> =
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka1" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka1"><span class="mi">1</span>: <span class="nb">apply</span> GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq g e&#39;) (gqglue (e a b s)) =
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka2" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka2">lhs nrapply GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B, C</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>g</var><span class="hyp-type"><b>: </b><span>B -&gt; C</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>T</var><span class="hyp-type"><b>: </b><span>C -&gt; C -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; T (g a) (g b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gqglue (e&#39; (f a) (f b) (e a b s)) =
ap
  (functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; g (f x))
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
      e&#39; (f a) (f b) (e a b r))) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (GraphQuotient_rec_beta_gqglue _ _ _ _ s)^.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka3" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka3"><span class="kn">Lemma</span> <span class="nf">functor2_gq</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> <span class="nv">f&#39;</span> : A -&gt; B)
  {<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>} {<span class="nv">S</span> : B -&gt; B -&gt; <span class="kt">Type</span>}
  (<span class="nv">e</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; S (f a) (f b)) (<span class="nv">e&#39;</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; S (f&#39; a) (f&#39; b))
  (<span class="nv">p</span> : f == f&#39;)
  (<span class="nv">q</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">r</span>, transport011 S (p a) (p b) (e a b r) = e&#39; a b r)
  : functor_gq f e == functor_gq f&#39; e&#39;.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f e == functor_gq f&#39; e&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka4" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka4"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f e == functor_gq f&#39; e&#39;</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka5" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka5">snrapply GraphQuotient_ind.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
 functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chka6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chka6"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   functor_gq f e x = functor_gq f&#39; e&#39; x) (gqglue s)
  (<span class="nl">?gq&#39;</span> a) = <span class="nl">?gq&#39;</span> b</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka7" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka7">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> : A,
(<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
 functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka8" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka8"><span class="nb">simpl</span>; <span class="nb">intro</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gq (f a) = gq (f&#39; a)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chka9" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chka9"><span class="nb">apply</span> ap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">f a = f&#39; a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">apply</span> p.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkaa" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkaa">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">s</span> : R a b),
transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   functor_gq f e x = functor_gq f&#39; e&#39; x) (gqglue s)
  (((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; ap gq (p a0))
    :
    <span class="kr">forall</span> <span class="nv">a0</span> : A,
    (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
     functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a0)) a) =
((<span class="kr">fun</span> <span class="nv">a0</span> : A =&gt; ap gq (p a0))
 :
 <span class="kr">forall</span> <span class="nv">a0</span> : A,
 (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
  functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a0)) b</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkab" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkab"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport
  (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
   functor_gq f e x = functor_gq f&#39; e&#39; x) (gqglue s)
  (((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; ap gq (p a))
    :
    <span class="kr">forall</span> <span class="nv">a</span> : A,
    (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
     functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a)) a) =
((<span class="kr">fun</span> <span class="nv">a</span> : A =&gt; ap gq (p a))
 :
 <span class="kr">forall</span> <span class="nv">a</span> : A,
 (<span class="kr">fun</span> <span class="nv">x</span> : GraphQuotient R =&gt;
  functor_gq f e x = functor_gq f&#39; e&#39; x) (gq a)) b</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkac" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkac">nrapply (transport_paths_FlFr&#39; (gqglue s)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq f e) (gqglue s) @ ap gq (p b) =
ap gq (p a) @ ap (functor_gq f&#39; e&#39;) (gqglue s)</div></blockquote></div></div></small><span class="alectryon-wsp">  
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkad" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkad">rhs nrefine (<span class="mi">1</span> @@ _).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq f e) (gqglue s) @ ap gq (p b) =
ap gq (p a) @ <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkae" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkae"><hr></label><div class="goal-conclusion">ap (functor_gq f&#39; e&#39;) (gqglue s) = <span class="nl">?Goal</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkaf" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkaf"><span class="mi">2</span>: <span class="nb">apply</span> GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq f e) (gqglue s) @ ap gq (p b) =
ap gq (p a) @ gqglue (e&#39; a b s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb0" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb0">lhs nrefine (_ @@ <span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ap (functor_gq f e) (gqglue s) = <span class="nl">?Goal</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkb1" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkb1"><hr></label><div class="goal-conclusion"><span class="nl">?Goal</span> @ ap gq (p b) = ap gq (p a) @ gqglue (e&#39; a b s)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb2" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb2"><span class="mi">1</span>: <span class="nb">apply</span> GraphQuotient_rec_beta_gqglue.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gqglue (e a b s) @ ap gq (p b) =
ap gq (p a) @ gqglue (e&#39; a b s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb3" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb3"><span class="nb">apply</span> moveL_Mp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ap gq (p a))^ @ (gqglue (e a b s) @ ap gq (p b)) =
gqglue (e&#39; a b s)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb4" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb4"><span class="nb">symmetry</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gqglue (e&#39; a b s) =
(ap gq (p a))^ @ (gqglue (e a b s) @ ap gq (p b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb5" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb5"><span class="nb">destruct</span> (q a b s).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">gqglue (transport011 S (p a) (p b) (e a b s)) =
(ap gq (p a))^ @ (gqglue (e a b s) @ ap gq (p b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb6" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb6">lhs nrapply (ap_transport011 _ _ (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">_</span> =&gt; gqglue)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">H</span> : B =&gt; gq s = gq H) (p a) (p b)
  (gqglue (e a b s)) =
(ap gq (p a))^ @ (gqglue (e a b s) @ ap gq (p b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb7" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb7">rhs nrapply concat_p_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f, f'</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>e'</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f&#39; a) (f&#39; b)</span></span></span><br><span><var>p</var><span class="hyp-type"><b>: </b><span>f == f&#39;</span></span></span><br><span><var>q</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 S (p a) (p b) (e a b r) = e&#39; a b r</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 (<span class="kr">fun</span> <span class="nv">s</span> <span class="nv">H</span> : B =&gt; gq s = gq H) (p a) (p b)
  (gqglue (e a b s)) =
((ap gq (p a))^ @ gqglue (e a b s)) @ ap gq (p b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">nrapply transport011_paths.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
<span class="sd">(** ** Equivalence of graph quotients *)</span>

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb8" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb8"><span class="kn">Global Instance</span> <span class="nf">isequiv_functor_gq</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A -&gt; B) `{IsEquiv _ _ f}
  {R : A -&gt; A -&gt; <span class="kt">Type</span>} {S : B -&gt; B -&gt; <span class="kt">Type</span>} (e : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b -&gt; S (f a) (f b))
  `{<span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, IsEquiv (e a b)}
  : IsEquiv (functor_gq f e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_gq f e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkb9" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkb9"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">IsEquiv (functor_gq f e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkba" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkba">srapply isequiv_adjointify.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient S -&gt; GraphQuotient R</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkbb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkbb"><hr></label><div class="goal-conclusion">functor_gq f e o <span class="nl">?g</span> == idmap</div></blockquote><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkbc" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkbc"><hr></label><div class="goal-conclusion"><span class="nl">?g</span> o functor_gq f e == idmap</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkbd" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkbd">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">GraphQuotient S -&gt; GraphQuotient R</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkbe" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkbe">nrapply (functor_gq f^-<span class="mi">1</span>).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : B, S a b -&gt; R (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkbf" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkbf"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>S a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc0" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc0"><span class="nb">apply</span> (e _ _)^-<span class="mi">1</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>S a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">S (f (f^-<span class="mi">1</span> a)) (f (f^-<span class="mi">1</span> b))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">exact</span> (transport011 S (eisretr f a)^ (eisretr f b)^ s).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc1" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc1">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f e
o functor_gq f^-<span class="mi">1</span>
    (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">s</span> : S a b) =&gt;
     (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
       (transport011 S (eisretr f a)^ (eisretr f b)^ s)) ==
idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc2" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc2"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f e
  (functor_gq f^-<span class="mi">1</span>
     (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">s</span> : S a b) =&gt;
      (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           s)) x) = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc3" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc3">lhs nrapply functor_gq_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">r</span> : S a b) =&gt;
   e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)
     ((e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           r))) x = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc4" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc4">rhs_V nrapply functor_gq_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; f (f^-<span class="mi">1</span> x))
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">r</span> : S a b) =&gt;
   e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)
     ((e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           r))) x =
functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : B =&gt; idmap) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc5" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc5">snrapply functor2_gq; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : B =&gt; f (f^-<span class="mi">1</span> x)) == idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkc6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkc6"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">r</span> : S a b),
transport011 S (<span class="nl">?Goal0</span> a) (<span class="nl">?Goal0</span> b)
  (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)
     ((e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           r))) = r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc7" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc7"><span class="mi">1</span>: <span class="nb">apply</span> eisretr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">r</span> : S a b),
transport011 S (eisretr f a) (eisretr f b)
  (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)
     ((e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc8" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc8"><span class="nb">intros</span> a b s.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>S a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 S (eisretr f a) (eisretr f b)
  (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b)
     ((e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
        (transport011 S (eisretr f a)^ (eisretr f b)^
           s))) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkc9" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkc9"><span class="nb">rewrite</span> (eisretr (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>S a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 S (eisretr f a) (eisretr f b)
  (transport011 S (eisretr f a)^ (eisretr f b)^ s) = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkca" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkca">lhs_V nrapply transport011_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient S</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>S a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 S ((eisretr f a)^ @ eisretr f a)
  ((eisretr f b)^ @ eisretr f b) s = s</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> <span class="mi">2</span> concat_Vp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkcb" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkcb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f^-<span class="mi">1</span>
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">s</span> : S a b) =&gt;
   (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
     (transport011 S (eisretr f a)^ (eisretr f b)^ s))
o functor_gq f e == idmap</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkcc" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkcc"><span class="nb">intros</span> x.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq f^-<span class="mi">1</span>
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : B) (<span class="nv">s</span> : S a b) =&gt;
   (e (f^-<span class="mi">1</span> a) (f^-<span class="mi">1</span> b))^-<span class="mi">1</span>
     (transport011 S (eisretr f a)^ (eisretr f b)^ s))
  (functor_gq f e x) = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkcd" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkcd">lhs nrapply functor_gq_compose.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
   (e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (eisretr f (f a))^
        (eisretr f (f b))^ (e a b r))) x = x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkce" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkce">rhs_V nrapply functor_gq_idmap.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">functor_gq (<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x))
  (<span class="kr">fun</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b) =&gt;
   (e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (eisretr f (f a))^
        (eisretr f (f b))^ (e a b r))) x =
functor_gq idmap (<span class="kr">fun</span> <span class="nv">a</span> <span class="nv">b</span> : A =&gt; idmap) x</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkcf" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkcf">snrapply functor2_gq; <span class="nb">cbn</span> beta.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">fun</span> <span class="nv">x</span> : A =&gt; f^-<span class="mi">1</span> (f x)) == idmap</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="graphquotient-v-chkd0" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><label class="goal-separator" for="graphquotient-v-chkd0"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 R (<span class="nl">?Goal</span> a) (<span class="nl">?Goal</span> b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (eisretr f (f a))^
        (eisretr f (f b))^ (e a b r))) = r</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd1" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd1"><span class="mi">1</span>: <span class="nb">apply</span> eissect.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> : A) (<span class="nv">r</span> : R a b),
transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (eisretr f (f a))^
        (eisretr f (f b))^ (e a b r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd2" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd2"><span class="nb">intros</span> a b r.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (eisretr f (f a))^
        (eisretr f (f b))^ (e a b r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd3" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd3"><span class="nb">rewrite</span> <span class="mi">2</span> eisadj.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (ap f (eissect f a))^
        (ap f (eissect f b))^ (e a b r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd4" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd4"><span class="nb">rewrite</span> &lt;- <span class="mi">2</span> ap_V.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 S (ap f (eissect f a)^)
        (ap f (eissect f b)^) (e a b r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd5" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd5"><span class="nb">rewrite</span> &lt;- (transport011_compose S).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (transport011 (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> : A =&gt; S (f x) (f y))
        (eissect f a)^ (eissect f b)^ (e a b r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd6" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd6"><span class="nb">rewrite</span> &lt;- (ap_transport011 (Q := <span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> =&gt; S (f x) (f y)) (eissect f a)^ (eissect f b)^ e).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  ((e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))^-<span class="mi">1</span>
     (e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b))
        (transport011 R (eissect f a)^ (eissect f b)^
           r))) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd7" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd7"><span class="nb">rewrite</span> (eissect (e (f^-<span class="mi">1</span> (f a)) (f^-<span class="mi">1</span> (f b)))).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R (eissect f a) (eissect f b)
  (transport011 R (eissect f a)^ (eissect f b)^ r) = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="graphquotient-v-chkd8" style="display: none" type="checkbox"><label class="alectryon-input" for="graphquotient-v-chkd8">lhs_V nrapply transport011_pp.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>f</var><span class="hyp-type"><b>: </b><span>A -&gt; B</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>IsEquiv f</span></span></span><br><span><var>R</var><span class="hyp-type"><b>: </b><span>A -&gt; A -&gt; <span class="kt">Type</span></span></span></span><br><span><var>S</var><span class="hyp-type"><b>: </b><span>B -&gt; B -&gt; <span class="kt">Type</span></span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, R a b -&gt; S (f a) (f b)</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> : A, IsEquiv (e a b)</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>GraphQuotient R</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>r</var><span class="hyp-type"><b>: </b><span>R a b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">transport011 R ((eissect f a)^ @ eissect f a)
  ((eissect f b)^ @ eissect f b) r = r</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">by</span> <span class="nb">rewrite</span> <span class="mi">2</span> concat_Vp.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">equiv_functor_gq</span> {<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>} (<span class="nv">f</span> : A &lt;~&gt; B)
  (<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Type</span>) (<span class="nv">S</span> : B -&gt; B -&gt; <span class="kt">Type</span>) (<span class="nv">e</span> : <span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span>, R a b &lt;~&gt; S (f a) (f b))
  : GraphQuotient R &lt;~&gt; GraphQuotient S
  := Build_Equiv _ _ (functor_gq f e) _.</span></span></pre>
</div>
</div></body>
</html>
