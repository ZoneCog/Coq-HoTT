<html>
<head>
<title>GraphQuotient.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for GraphQuotient.v</h1>

<div class="code" title="File: GraphQuotient.v
Line: 1
Time: 0.024s">
<div class="time" style="width: 18.181818181818%"></div>
<pre>Require Import Basics.Overture Basics.Tactics Basics.PathGroupoids Basics.Equivalences.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 1
Time: 0.008s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
Require Import Types.Universe Types.Paths Types.Arrow Types.Sigma Cubical.DPath.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** * Quotient of a graph *)

(** ** Definition *)

(** The quotient of a graph is one of the simplest HITs that can be found in HoTT. It consists of a base type and a relation on it, and for every witness of a relation between two points of the type, a path.

We use graph quotients to build up all our other non-recursive HITs. Their simplicity means that we can easily prove results about them and generalise them to other HITs. *)

</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Unset Elimination Schemes.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Module Export GraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
 Section GraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Universes i j u.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Constraint i &lt;= u, j &lt;= u.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 17
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context {A : Type@{i}}.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Private Inductive GraphQuotient (R : A -&gt; A -&gt; Type@{j}) : Type@{u} :=
  | gq : A -&gt; GraphQuotient R.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Arguments gq {R} a.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Context {R : A -&gt; A -&gt; Type@{j}}.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Axiom gqglue : forall {a b : A},
    R a b -&gt; paths (@gq R a) (gq b).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 28
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>

  Definition GraphQuotient_ind
    (P : GraphQuotient R -&gt; Type@{k})
    (gq' : forall a, P (gq a))
    (gqglue' : forall a b (s : R a b), gqglue s # gq' a = gq' b)
    : forall x, P x := fun x =&gt;
    match x with
    | gq a =&gt; fun _ =&gt; gq' a
    end gqglue'.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** Above we did a match with output type a function, and then outside of the match we provided the argument [gqglue'].  If we instead end with [| gq a =&gt; gq' a end.], the definition will not depend on [gqglue'], which would be incorrect.  This is the idiom referred to in ../../test/bugs/github1758.v and github1759.v. *)

 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 40
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Axiom GraphQuotient_ind_beta_gqglue
  : forall (P : GraphQuotient R -&gt; Type@{k})
    (gq' : forall a, P (gq a))
    (gqglue' : forall a b (s : R a b), gqglue s # gq' a = gq' b)
    (a b: A) (s : R a b),
    apD (GraphQuotient_ind P gq' gqglue') (gqglue s) = gqglue' a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

 End GraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
End GraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments gq {A R} a.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition GraphQuotient_rec {A R P} (c : A -&gt; P) (g : forall a b, R a b -&gt; c a = c b)
  : GraphQuotient R -&gt; P.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact c.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (transport_const _ _ @ g a b s).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 58
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 59
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>

Definition GraphQuotient_rec_beta_gqglue {A R P}
  (c : A -&gt; P) (g : forall a b, R a b -&gt; c a = c b)
  (a b : A) (s : R a b)
  : ap (GraphQuotient_rec c g) (gqglue s) = g a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 64
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold GraphQuotient_rec.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine (cancelL _ _ _ _ ).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  refine ((apD_const _ _)^ @ _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 68
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
  rapply GraphQuotient_ind_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 69
Time: 0.004s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** The flattening lemma *)

(** Univalence tells us that type families over a colimit correspond to cartesian families over the indexing diagram.  The flattening lemma gives an explicit description of the family over a colimit that corresponds to a given cartesian family, again using univalence.  Together, these are known as descent, a fundamental result in higher topos theory which has many implications. *)

</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section Flattening.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  
  Context `{Univalence} {A : Type} {R : A -&gt; A -&gt; Type}.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** We consider a type family over [A] which is "equifibrant" or "cartesian": the fibers are equivalent when the base points are related by [R]. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context (F : A -&gt; Type) (e : forall x y, R x y -&gt; F x &lt;~&gt; F y).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** By univalence, the equivalences give equalities, which means that [F] induces a map on the quotient. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 82
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Definition DGraphQuotient : GraphQuotient R -&gt; Type
    := GraphQuotient_rec F (fun x y s =&gt; path_universe (e x y s)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 83
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The transport of [DGraphQuotient] along [gqglue] equals the equivalence [e] applied to the original point. This lemma is required a few times in the following proofs. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition transport_DGraphQuotient {x y} (s : R x y) (a : F x)
    : transport DGraphQuotient (gqglue s) a = e x y s a.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 88
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply transport_idmap_ap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    lhs nrapply (transport2 idmap).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 90
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 91
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    rapply transport_path_universe.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 93
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The family [DGraphQuotient] we have defined over [GraphQuotient R] has a total space which we will describe as a [GraphQuotient] of [sig F] by an appropriate relation. *)

  (** We mimic the constructors of [GraphQuotient] for the total space. Here is the point constructor. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition flatten_gq {x} : F x -&gt; sig DGraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 98
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 99
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (gq x; p).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  
  (** And here is the path constructor. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition flatten_gqglue {x y} (s : R x y) (a : F x)
    : flatten_gq a = flatten_gq (e x y s a).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    snrapply path_sigma'.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 108
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> by apply gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 109
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_DGraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** This lemma is the same as [transport_DGraphQuotient] but adapted instead for [DPath]. The use of [DPath] will be apparent there. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 114
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma equiv_dp_dgraphquotient (x y : A) (s : R x y) (a : F x) (b : F y)
    : DPath DGraphQuotient (gqglue s) a b &lt;~&gt; (e x y s a = b).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 116
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (equiv_concat_l _^ _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 117
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_DGraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We can also prove an induction principle for [sig DGraphQuotient]. We won't show that it satisfies the relevant computation rules as these will not be needed. Instead we will prove the non-dependent eliminator directly so that we can better reason about it. In order to get through the path algebra here, we have opted to use dependent paths. This makes the reasoning slightly easier, but it should not matter too much. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 122
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Definition flatten_ind {Q : sig DGraphQuotient -&gt; Type}
    (Qgq : forall a (x : F a), Q (flatten_gq x))
    (Qgqglue : forall a b (s : R a b) (x : F a),
      flatten_gqglue s x # Qgq _ x = Qgq _ (e _ _ _ x))
    : forall x, Q x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 126
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply sig_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: exact Qgq.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply dp_forall.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 132
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x y.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 133
Time: 0.006s">
<div class="time" style="width: 4.5454545454545%"></div>
<pre>
    srapply (equiv_ind (equiv_dp_dgraphquotient a b s x y)^-1).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 135
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    destruct q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 136
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (transport2 _ _ _ @ Qgqglue a b s x).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (ap (path_sigma_uncurried DGraphQuotient _ _) _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 138
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    snrapply path_sigma.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 140
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply concat_p1.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply inv_V.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 142
Time: 0.007s">
<div class="time" style="width: 5.3030303030303%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 143
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Rather than use [flatten_ind] to define [flatten_rec] we reprove this simple case. This means we can later reason about it and derive the computation rules easily. The full computation rule for [flatten_ind] takes some work to derive and is not actually needed. *)
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition flatten_rec {Q : Type} (Qgq : forall a, F a -&gt; Q)
    (Qgqglue : forall a b (s : R a b) (x : F a), Qgq a x = Qgq b (e _ _ s x))
    : sig DGraphQuotient -&gt; Q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 149
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply sig_rec.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 150
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 151
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: exact Qgq.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 152
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 153
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    nrapply dpath_arrow.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 154
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros y.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    lhs nrapply transport_const.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 156
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    lhs nrapply (Qgqglue a b s).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    f_ap; symmetry.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 158
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply transport_DGraphQuotient.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 159
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 160
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** The non-dependent eliminator computes as expected on our "path constructor". *) 
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 163
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Definition flatten_rec_beta_gqglue {Q : Type} (Qgq : forall a, F a -&gt; Q)
    (Qgqglue : forall a b (r : R a b) (x : F a), Qgq a x = Qgq b (e _ _ r x))
    (a b : A) (s : R a b) (x : F a)
    : ap (flatten_rec Qgq Qgqglue) (flatten_gqglue s x) = Qgqglue a b s x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 166
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 167
Time: 0.011s">
<div class="time" style="width: 8.3333333333333%"></div>
<pre>
    lhs nrapply ap_sig_rec_path_sigma; cbn.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 168
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs nrapply (ap (fun x =&gt; x @ _)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 170
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre> nrapply ap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 170
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      nrapply (ap01 (fun x =&gt; ap10 x _)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 171
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      nrapply GraphQuotient_ind_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveR_pM.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 173
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveL_pM.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 174
Time: 0.005s">
<div class="time" style="width: 3.7878787878788%"></div>
<pre>
    do 3 lhs nrapply concat_pp_p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 175
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveR_Vp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 176
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs refine (1 @@ (1 @@ (_ @@ 1))).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 177
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    1: nrapply (ap10_dpath_arrow DGraphQuotient (fun _ =&gt; Q) (gqglue s)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 178
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs refine (1 @@ (1 @@ _)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 179
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre> lhs nrapply concat_pp_p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      nrapply concat_pp_p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 181
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs nrapply (1 @@ concat_V_pp _ _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 182
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply concat_V_pp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 183
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply concat_pp_p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 184
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    f_ap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 185
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply concat_pp_p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 186
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveR_Mp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs nrapply concat_Vp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveR_pV.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs nrapply concat_1p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 190
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    nrapply ap_V.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 191
Time: 0.132s">
<div class="time" style="width: 100%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Now that we've shown that [sig DGraphQuotient] acts like a [GraphQuotient] of [sig F] by an appropriate relation, we can use this to prove the flattening lemma. The maps back and forth are very easy so this could almost be a formal consequence of the induction principle. *) 
 </pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 195
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Lemma equiv_gq_flatten
    : sig DGraphQuotient
    &lt;~&gt; GraphQuotient (fun a b =&gt; {r : R a.1 b.1 &amp; e _ _ r a.2 = b.2}).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    snrapply equiv_adjointify.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> snrapply flatten_rec.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun a x =&gt; gq (a; x)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a b r x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 203
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        exists r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 205
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> snrapply GraphQuotient_rec.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (fun '(a; x) =&gt; (gq a; x)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 207
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros [a x] [b y] [r p].</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        simpl in p, r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 209
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        destruct p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        apply flatten_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 212
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre> snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 212
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      1: reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 213
Time: 0.006s">
<div class="time" style="width: 4.5454545454545%"></div>
<pre>
      intros [a x] [b y] [r p].</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simpl in p, r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 215
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      destruct p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simpl.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 217
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
      lhs nrapply transport_paths_FFlr.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 218
Time: 0.003s">
<div class="time" style="width: 2.2727272727273%"></div>
<pre>
      rewrite GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 219
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      refine ((_ @@ 1) @ concat_Vp _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 220
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
      lhs nrapply concat_p1.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      apply inverse2.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 222
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
      nrapply flatten_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 224
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre> snrapply flatten_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 224
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      1: reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 225
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      intros a b r x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 226
Time: 0.004s">
<div class="time" style="width: 3.030303030303%"></div>
<pre>
      nrapply (transport_paths_FFlr' (g := GraphQuotient_rec _ _)); apply equiv_p1_1q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 227
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
      rewrite flatten_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      exact (GraphQuotient_rec_beta_gqglue _ _ (a; x) (b; e a b r x) (r; 1)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 229
Time: 0.048s">
<div class="time" style="width: 36.363636363636%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 230
Time: 0.09s">
<div class="time" style="width: 68.181818181818%"></div>
<pre>

End Flattening.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 232
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Functoriality of graph quotients *)

</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Lemma functor_gq {A B : Type} (f : A -&gt; B)
  {R : A -&gt; A -&gt; Type} {S : B -&gt; B -&gt; Type} (e : forall a b, R a b -&gt; S (f a) (f b))
  : GraphQuotient R -&gt; GraphQuotient S.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snrapply GraphQuotient_rec.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: exact (fun x =&gt; gq (f x)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a b r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply e.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma functor_gq_idmap {A : Type} {R : A -&gt; A -&gt; Type}
  : functor_gq (A:=A) (B:=A) (S:=R) idmap (fun a b r =&gt; r) == idmap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a b r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 252
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
  nrapply (transport_paths_FlFr' (gqglue r)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 253
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_p1_1q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  rhs nrapply ap_idmap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  nrapply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 256
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 257
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>

Lemma functor_gq_compose {A B C : Type} (f : A -&gt; B) (g : B -&gt; C)
  {R : A -&gt; A -&gt; Type} {S : B -&gt; B -&gt; Type} {T : C -&gt; C -&gt; Type}
  (e : forall a b, R a b -&gt; S (f a) (f b)) (e' : forall a b, S a b -&gt; T (g a) (g b))
  : functor_gq g e' o (functor_gq f e) == functor_gq (g o f) (fun a b r =&gt; e' _ _ (e _ _ r)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 262
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: reflexivity.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 265
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 266
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
  nrapply (transport_paths_FlFr' (gqglue s)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 267
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  apply equiv_p1_1q.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 268
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
  lhs nrapply (ap_compose (functor_gq f e) (functor_gq g e') (gqglue s)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 269
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  lhs nrapply ap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 270
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  1: apply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 271
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
  lhs nrapply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 272
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact (GraphQuotient_rec_beta_gqglue _ _ _ _ s)^.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 273
Time: 0.003s">
<div class="time" style="width: 2.2727272727273%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 274
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>

Lemma functor2_gq {A B : Type} (f f' : A -&gt; B)
  {R : A -&gt; A -&gt; Type} {S : B -&gt; B -&gt; Type}
  (e : forall a b, R a b -&gt; S (f a) (f b)) (e' : forall a b, R a b -&gt; S (f' a) (f' b))
  (p : f == f')
  (q : forall a b r, transport011 S (p a) (p b) (e a b r) = e' a b r)
  : functor_gq f e == functor_gq f' e'.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 281
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 282
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  snrapply GraphQuotient_ind.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 283
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 284
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> simpl; intro.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 284
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply ap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 285
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply p.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 286
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 287
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 287
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    nrapply (transport_paths_FlFr' (gqglue s)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 288
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>  
    rhs nrefine (1 @@ _).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 289
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    2: apply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 290
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    lhs nrefine (_ @@ 1).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 291
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply GraphQuotient_rec_beta_gqglue.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 292
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply moveL_Mp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 293
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    symmetry.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 294
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    destruct (q a b s).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 295
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply (ap_transport011 _ _ (fun s _ =&gt; gqglue)).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 296
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    rhs nrapply concat_p_pp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 297
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    nrapply transport011_paths.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 298
Time: 0.008s">
<div class="time" style="width: 6.0606060606061%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 299
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Equivalence of graph quotients *)

</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 302
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>Global Instance isequiv_functor_gq {A B : Type} (f : A -&gt; B) `{IsEquiv _ _ f}
  {R : A -&gt; A -&gt; Type} {S : B -&gt; B -&gt; Type} (e : forall a b, R a b -&gt; S (f a) (f b))
  `{forall a b, IsEquiv (e a b)}
  : IsEquiv (functor_gq f e).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 305
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 306
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  srapply isequiv_adjointify.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 307
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 308
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> nrapply (functor_gq f^-1).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 308
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 309
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply (e _ _)^-1.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 310
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (transport011 S (eisretr f a)^ (eisretr f b)^ s).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 311
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 312
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 312
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply functor_gq_compose.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 313
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs_V nrapply functor_gq_idmap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 314
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    snrapply functor2_gq; cbn beta.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 315
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply eisretr.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 316
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b s.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 317
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite (eisretr (e (f^-1 a) (f^-1 b))).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 318
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs_V nrapply transport011_pp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 319
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    by rewrite 2 concat_Vp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 320
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 321
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 321
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    lhs nrapply functor_gq_compose.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 322
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rhs_V nrapply functor_gq_idmap.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 323
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    snrapply functor2_gq; cbn beta.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 324
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    1: apply eissect.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 325
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros a b r.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 326
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite 2 eisadj.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 327
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite &lt;- 2 ap_V.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 328
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite &lt;- (transport011_compose S).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 329
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    rewrite &lt;- (ap_transport011 (Q := fun x y =&gt; S (f x) (f y)) (eissect f a)^ (eissect f b)^ e).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 330
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    rewrite (eissect (e (f^-1 (f a)) (f^-1 (f b)))).</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 331
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>
    lhs_V nrapply transport011_pp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 332
Time: 0.001s">
<div class="time" style="width: 0.75757575757576%"></div>
<pre>
    by rewrite 2 concat_Vp.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 333
Time: 0.006s">
<div class="time" style="width: 4.5454545454545%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 334
Time: 0.002s">
<div class="time" style="width: 1.5151515151515%"></div>
<pre>

Definition equiv_functor_gq {A B : Type} (f : A &lt;~&gt; B)
  (R : A -&gt; A -&gt; Type) (S : B -&gt; B -&gt; Type) (e : forall a b, R a b &lt;~&gt; S (f a) (f b))
  : GraphQuotient R &lt;~&gt; GraphQuotient S
  := Build_Equiv _ _ (functor_gq f e) _.</pre>
</div>
<div class="code" title="File: GraphQuotient.v
Line: 340
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

